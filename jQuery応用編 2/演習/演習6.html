<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
    <style type="text/css">
        .container{
            list-style: none;
        }
        .container li{
            width: 256px;
            height: 256px;
            margin: 100px auto;
            border: dotted 1px #808080;
            background-image: url("img/loading.gif");
            background-repeat: no-repeat;
            background-position: 50% 50%;
        }
        .container li img{
            opacity: 0;
        }
    </style>
</head>
<body>
<ul class="container" id="container">
    <li><img data-url="img/animal1.jpeg" src="" /></li>
    <li><img data-url="img/animal2.jpeg" src="" /></li>
    <li><img data-url="img/animal3.jpeg" src="" /></li>
    <li><img data-url="img/animal4.jpeg" src="" /></li>
    <li><img data-url="img/animal5.jpeg" src="" /></li>
    <li><img data-url="img/animal6.jpeg" src="" /></li>
    <li><img data-url="img/animal7.jpeg" src="" /></li>
    <li><img data-url="img/animal8.jpeg" src="" /></li>
    <li><img data-url="img/animal9.jpeg" src="" /></li>
    <li><img data-url="img/animal10.jpeg" src="" /></li>
</ul>
</body>
<script type="text/javascript">

    
var LEIHAUOLI = LEIHAUOLI || {};
LEIHAUOLI.PAGE1 = {};
LEIHAUOLI.PAGE1.lazyLoad = {
    init : function(){
        this.setParameters();
        this.bindEvent();
    },
    
    setParameters : function(){
        this.$container =$('.container')
        this.$img = $('img')
//        this.imgTop = this.$img.offset().top;
//        this.imgBottom = this.$img.offset().top + this.$img.height();
        this.loadTop = $(window).scrollTop(); //表示範囲の上端
        this.loadBottom = $(window).scrollTop() + $(window).height();//表示範囲の下端
        this.loadLeft = $(window).scrollLeft();　//表示範囲の左端
        this.loadRight = $(window).scrollLeft() + $(window).width();//表示範囲の右端
        
    },
    
    bindEvent : function(){
        var self = this;
        var imgLi = this.$container.find('li');
            imgLi.each(function(){
            var $element = $(this);
            this.imgTop = $element.offset().top;
            this.imgBottom = this.imgTop + $element.height();
                console.log(this.imgBottom);
            this.dataAttr = $element.attr('data-url');
            this.srcAttr = $element.attr('src',this.dataAttr);
            $(window).on('load resize scroll',function(){
                console.log(self.imgBottom);
                    if(self.imgTop >= self.loadTop && self.imgBottom <= self.loadBottom 
                       || self.imgTop <= self.loadTop && self.imgBottom >= self.loadBottom){
                        console.log('if');
                        $element.animate({opacity :1},1000);
                };
            });
        });
    }
    
      
};
    
    
$(function(){
    LEIHAUOLI.PAGE1.lazyLoad.init();
}); 
        
    
    
    
    
    
    
</script>
</html>
